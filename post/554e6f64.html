<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/green/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"sumumm.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":300},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="æœ¬æ–‡ä¸»è¦æ˜¯prctlå‡½æ•°çš„ç›¸å…³ç¬”è®°ï¼Œè‹¥ç¬”è®°ä¸­æœ‰é”™è¯¯æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ğŸ˜ƒã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•°">
<meta property="og:url" content="https://sumumm.github.io/post/554e6f64.html">
<meta property="og:site_name" content="è‹æœ¨">
<meta property="og:description" content="æœ¬æ–‡ä¸»è¦æ˜¯prctlå‡½æ•°çš„ç›¸å…³ç¬”è®°ï¼Œè‹¥ç¬”è®°ä¸­æœ‰é”™è¯¯æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ğŸ˜ƒã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-07-02T13:52:40.000Z">
<meta property="article:modified_time" content="2025-06-13T16:25:56.996Z">
<meta property="article:author" content="è‹æœ¨">
<meta property="article:tag" content="LV05-æ“ä½œç³»ç»Ÿ">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://sumumm.github.io/post/554e6f64.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://sumumm.github.io/post/554e6f64.html","path":"post/554e6f64.html","title":"LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•°"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•° | è‹æœ¨</title>
  








    <script src="/js/browser_tools_disable.js"></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.com/hexo-next-tags-plus@latest/lib/tag_plus.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">è‹æœ¨</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">æˆ‘çš„å­¦ä¹ ä¹‹è·¯</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>è‹æœ¨çš„å®¶</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»é¡µ<span class="badge">42</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£é¡µ<span class="badge">673</span></a></li><li class="menu-item menu-item-flink"><a href="/flink/" rel="section"><i class="fa fa-link fa-fw"></i>å‹äººå¸</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äºæˆ‘</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81prctl-%E5%87%BD%E6%95%B0"><span class="nav-text">ä¸€ã€prctl() å‡½æ•°</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8"><span class="nav-text">äºŒã€å‡½æ•°åº”ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-text">1. çº¿ç¨‹ä½¿ç”¨å®ä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E7%9C%8B%E4%B8%8D%E5%88%B0%E7%BA%BF%E7%A8%8B%E4%BF%A1%E6%81%AF%EF%BC%9F"><span class="nav-text">1.1 çœ‹ä¸åˆ°çº¿ç¨‹ä¿¡æ¯ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E7%BA%BF%E7%A8%8B%E5%91%BD%E5%90%8D"><span class="nav-text">1.2 çº¿ç¨‹å‘½å</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%AE%BE%E7%BD%AE%E8%BF%9B%E7%A8%8B%E5%90%8D%E5%AD%97%EF%BC%9F"><span class="nav-text">2. è®¾ç½®è¿›ç¨‹åå­—ï¼Ÿ</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="è‹æœ¨"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">è‹æœ¨</p>
  <div class="site-description" itemprop="description">è«é“æ¡‘æ¦†æ™šï¼Œä¸ºéœå°šæ»¡å¤©</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">673</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/sumumm" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;sumumm" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://sumumm.github.io/post/554e6f64.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="è‹æœ¨">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è‹æœ¨">
      <meta itemprop="description" content="è«é“æ¡‘æ¦†æ™šï¼Œä¸ºéœå°šæ»¡å¤©">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•° | è‹æœ¨">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•°
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-07-02 21:52:40" itemprop="dateCreated datePublished" datetime="2023-07-02T21:52:40+08:00">2023-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">åµŒå…¥å¼å¼€å‘</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/01HQ%E8%AF%BE%E7%A8%8B%E4%BD%93%E7%B3%BB/" itemprop="url" rel="index"><span itemprop="name">01HQè¯¾ç¨‹ä½“ç³»</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/01HQ%E8%AF%BE%E7%A8%8B%E4%BD%93%E7%B3%BB/LV05-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">LV05-æ“ä½œç³»ç»Ÿ</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>7 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>æœ¬æ–‡ä¸»è¦æ˜¯prctlå‡½æ•°çš„ç›¸å…³ç¬”è®°ï¼Œè‹¥ç¬”è®°ä¸­æœ‰é”™è¯¯æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ğŸ˜ƒã€‚</p>
<span id="more"></span>

<!-- Photo: none -->

<details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ä½¿ç”¨å·¥å…·åŠç‰ˆæœ¬ </summary>
              <div class='content'>
              <table>    <tr>        <td align="center" width=150px>Windows</td>        <td align="left">windows11</td>    </tr>    <tr>        <td align="center">Ubuntu</td>        <td align="left">Ubuntu16.04çš„64ä½ç‰ˆæœ¬</td>      </tr>    <tr>        <td align="center">VMwareÂ® Workstation 16 Pro</td>        <td align="left">16.2.3 build-19376536</td>      </tr>    <tr>        <td align="center">SecureCRT</td>        <td align="left">Version 8.7.2 (x64 build 2214)   -   æ­£å¼ç‰ˆ-2020å¹´5æœˆ14æ—¥</td>      </tr>    <tr>        <td align="center">å¼€å‘æ¿</td>        <td align="left">æ­£ç‚¹åŸå­ i.MX6ULL Linuxé˜¿å°”æ³•å¼€å‘æ¿</td>      </tr>    <tr>        <td align="center">uboot</td>        <td align="left">NXPå®˜æ–¹æä¾›çš„ubootï¼ŒNXPæä¾›çš„ç‰ˆæœ¬ä¸ºuboot-imx-rel_imx_4.1.15_2.1.0_ga(ä½¿ç”¨çš„ubootç‰ˆæœ¬ä¸ºU-Boot 2016.03)</td>      </tr>    <tr>        <td align="center">linuxå†…æ ¸</td>        <td align="left">linux-4.15(NXPå®˜æ–¹æä¾›)</td>      </tr>    <tr>        <td align="center">STM32å¼€å‘æ¿</td>        <td align="left">æ­£ç‚¹åŸå­æˆ˜èˆ°V3(STM32F103ZET6)</td>      </tr></table>
              </div>
            </details>

<details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹æœ¬æ–‡å‚è€ƒèµ„æ–™ </summary>
              <div class='content'>
              <table>    <tr><td align="center">å‚è€ƒæ–¹å‘  </td><td align="center">å‚è€ƒåŸæ–‡</td></tr>    <tr><td align="left">---</td><td align="left"><a href="" target="_blank">--- <i class="fa fa-external-link-alt"></i> </a></td></tr></table>
              </div>
            </details>

<details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ç›¸å…³æ–‡ä»¶ä¸‹è½½ </summary>
              <div class='content'>
              <table>    <tr>        <td align="center">---</td>        <td align="left">--- <a href="" target="_blank">  <i class="fa fa-external-link-alt"></i></a></td>      </tr></table>
              </div>
            </details>

<h1 id="ä¸€ã€prctl-å‡½æ•°"><a href="#ä¸€ã€prctl-å‡½æ•°" class="headerlink" title="ä¸€ã€prctl() å‡½æ•°"></a><font size=3>ä¸€ã€prctl() å‡½æ•°</font></h1><p>åœ¨ linux ä¸‹å¯ä»¥ä½¿ç”¨ man  2 prctl å‘½ä»¤æŸ¥çœ‹è¯¥å‡½æ•°çš„å¸®åŠ©æ‰‹å†Œï¼Œä¹Ÿå¯ä»¥è®¿é—®è¿™é‡Œï¼š<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man2/prctl.2.html">prctl(2) - Linux manual page (man7.org)</a>ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* éœ€åŒ…å«çš„å¤´æ–‡ä»¶ */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/prctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å‡½æ•°å£°æ˜ */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">prctl</span><span class="params">(<span class="type">int</span> option, <span class="type">unsigned</span> <span class="type">long</span> arg2, <span class="type">unsigned</span> <span class="type">long</span> arg3, <span class="type">unsigned</span> <span class="type">long</span> arg4, <span class="type">unsigned</span> <span class="type">long</span> arg5)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>ã€å‡½æ•°è¯´æ˜ã€‘</strong>è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤ï¼Œå®ƒæ˜¯ä¸ºè¿›ç¨‹åˆ¶å®šè€Œè®¾è®¡çš„ï¼Œæ˜ç¡®çš„é€‰æ‹©å–å†³äºoptionã€‚</p>
<p><strong>ã€å‡½æ•°å‚æ•°ã€‘</strong></p>
<ul>
<li>option ï¼š int ç±»å‹ï¼Œè¡¨ç¤ºæ“ä½œç±»å‹ï¼Œå…·ä½“æœ‰å“ªäº›ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ linux å†…æ ¸æºç ä¸­çš„ include&#x2F;uapi&#x2F;linux&#x2F;prctl.h æ–‡ä»¶ã€‚ </li>
<li>arg2ã€arg3ã€arg4å’Œarg5 ï¼šunsigned longç±»å‹ï¼Œè¿™äº›å°±å¯ä»¥çœ‹æ‰‹å†Œäº†ï¼Œä¸åŒçš„é€‰é¡¹æœ‰ä¸åŒçš„å«ä¹‰ï¼Œ</li>
</ul>
<p><strong>ã€è¿”å›å€¼ã€‘</strong> int ç±»å‹ï¼Œè¿™ä¸ªæ¯”è¾ƒé•¿ï¼Œå°±çœ‹æ–‡æ¡£å§ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p><strong>ã€ä½¿ç”¨æ ¼å¼ã€‘</strong>none</p>
<p><strong>ã€æ³¨æ„äº‹é¡¹ã€‘</strong> none </p>
<h1 id="äºŒã€å‡½æ•°åº”ç”¨"><a href="#äºŒã€å‡½æ•°åº”ç”¨" class="headerlink" title="äºŒã€å‡½æ•°åº”ç”¨"></a><font size=3>äºŒã€å‡½æ•°åº”ç”¨</font></h1><p>ä¸ºä»€ä¹ˆè¦è¯´ä»‹ç»è¿™ä¸ªå‡½æ•°ï¼Ÿå¯¹äºæˆ‘è‡ªå·±æ¥è¯´ï¼Œæˆ‘æ˜¯å› ä¸ºçœ‹åˆ°å®ƒå¯ä»¥è®¾ç½®çº¿ç¨‹çš„åç§°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹æˆ‘ä»¬çš„çº¿ç¨‹æ˜¯å¦è¿˜åœ¨è¿è¡Œã€‚</p>
<h2 id="1-çº¿ç¨‹ä½¿ç”¨å®ä¾‹"><a href="#1-çº¿ç¨‹ä½¿ç”¨å®ä¾‹" class="headerlink" title="1. çº¿ç¨‹ä½¿ç”¨å®ä¾‹"></a><font size=3>1. çº¿ç¨‹ä½¿ç”¨å®ä¾‹</font></h2><h3 id="1-1-çœ‹ä¸åˆ°çº¿ç¨‹ä¿¡æ¯ï¼Ÿ"><a href="#1-1-çœ‹ä¸åˆ°çº¿ç¨‹ä¿¡æ¯ï¼Ÿ" class="headerlink" title="1.1 çœ‹ä¸åˆ°çº¿ç¨‹ä¿¡æ¯ï¼Ÿ"></a><font size=3>1.1 çœ‹ä¸åˆ°çº¿ç¨‹ä¿¡æ¯ï¼Ÿ</font></h3><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹å®ä¾‹ </summary>
              <div class='content'>
              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  <span class="comment">/* fopen fputc*/</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span><span class="comment">/* pthread_create pthread_exit */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span> <span class="comment">/* sleep */</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread1</span><span class="params">(<span class="type">void</span> *arg)</span>;</span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread2</span><span class="params">(<span class="type">void</span> *arg)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> ret;</span><br><span class="line">	<span class="type">pthread_t</span> tid1, tid2;</span><br><span class="line"></span><br><span class="line">	ret = pthread_create(&amp;tid1, <span class="literal">NULL</span>, thread1, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;This is threadMutex1 thread create,ret=%d,tid1=%lu\n&quot;</span>, ret, tid1);</span><br><span class="line">	ret = pthread_create(&amp;tid2, <span class="literal">NULL</span>, thread2, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;This is threadMutex2 thread create,ret=%d,tid2=%lu\n&quot;</span>, ret, tid2);</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread1</span><span class="params">(<span class="type">void</span> *arg)</span></span><br><span class="line">&#123;</span><br><span class="line">	pthread_detach(pthread_self());</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);<span class="comment">/* usçº§ä¼‘çœ  */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="string">&quot;thread1 exit!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread2</span><span class="params">(<span class="type">void</span> *arg)</span></span><br><span class="line">&#123;</span><br><span class="line">	pthread_detach(pthread_self());</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);<span class="comment">/* usçº§ä¼‘çœ  */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="string">&quot;thread2 exit!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>

<p>åœ¨ä¸Šè¾¹çš„å®ä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œç„¶åæˆ‘ä»¬åœ¨çº¿ç¨‹ä¸­ä»€ä¹ˆä¹Ÿä¸åšï¼Œæˆ‘ä»¬ç¼–è¯‘ç¨‹åºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc main.c -Wall -lpthread</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬åœ¨åå°è¿è¡Œè¿™ä¸ªè¿›ç¨‹ï¼ˆ&amp;å°±è¡¨ç¤ºåœ¨åå°è¿è¡Œè¿™ä¸ªè¿›ç¨‹ï¼‰ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./a.out &amp;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬ä¼šçœ‹çœ‹åˆ°å±å¹•ä¸Šæœ‰ä¸¤è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is threadMutex1 thread create,ret=0,tid1=140490243557120</span><br><span class="line">This is threadMutex2 thread create,ret=0,tid2=140490235164416</span><br></pre></td></tr></table></figure>

<p>éšåå°±ä»€ä¹ˆç°è±¡éƒ½æ²¡æœ‰äº†ï¼Œæˆ‘ä»¬çš„è¿›ç¨‹åœ¨è¿è¡Œå—ï¼Ÿåˆ›å»ºçš„ä¸¤æ¡çº¿ç¨‹åœ¨è¿è¡Œå—ï¼Ÿ</p>
<p>æˆ‘ä»¬ä½¿ç”¨pså‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹ï¼Œåœ¨å¾ˆå¤šå®é™…linuxç³»ç»Ÿçš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶å®å¹¶ä¸ä¼šåƒubuntuæ¡Œé¢ç‰ˆè¿™æ ·æ”¯æŒå…·æœ‰å¦‚æ­¤å¤šå‚æ•°çš„pså‘½ä»¤ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨å¼€å‘æ¿ä¸Šä½¿ç”¨çš„æ ¹æ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯ç»è¿‡è£å‰ªï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æœ€åŸºç¡€çš„å‘½ä»¤æ¥æŸ¥çœ‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hk@vm:~/6temp/test$ ps</span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line"> 54694 pts/22   00:00:00 bash</span><br><span class="line"> 58091 pts/22   00:00:00 a.out</span><br><span class="line"> 58109 pts/22   00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„è¿›ç¨‹ a.out ä¾ç„¶åœ¨è¿è¡Œï¼Œé‚£çº¿ç¨‹å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ -T å‚æ•°æ¥æŸ¥çœ‹è¿›ç¨‹ä»¥åŠçº¿ç¨‹ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hk@vm:~/6temp/test$ ps -T</span><br><span class="line">   PID   SPID TTY          TIME CMD</span><br><span class="line"> 54694  54694 pts/22   00:00:00 bash</span><br><span class="line"> 58091  58091 pts/22   00:00:00 a.out</span><br><span class="line"> 58091  58092 pts/22   00:00:00 a.out</span><br><span class="line"> 58091  58093 pts/22   00:00:00 a.out</span><br><span class="line"> 58118  58118 pts/22   00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°ï¼Œæœ‰3ä¸ªa.outï¼Œå“ªä¸ªæ˜¯thread1ï¼Œå“ªä¸ªæ˜¯thread2ï¼Ÿä¸€çœ¼çœ‹è¿‡å»æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä»–ä»¬çš„PIDå’ŒSPIDï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡SPIDæ¥åŒºåˆ†ä¸åŒçš„çº¿ç¨‹ï¼Œä½†æ˜¯æŠŠï¼Œæˆ‘è‡ªå·±æ˜¯æ²¡æœ‰æŸ¥è¿‡è¿™ä¸ªSPIDæ˜¯ä¸åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™çš„tidç©¶ç«Ÿæœ‰æ²¡æœ‰è”ç³»ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ä¸Šè¾¹çš„prctlå‡½æ•°å°±èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚</p>
<h3 id="1-2-çº¿ç¨‹å‘½å"><a href="#1-2-çº¿ç¨‹å‘½å" class="headerlink" title="1.2 çº¿ç¨‹å‘½å"></a><font size=3>1.2 çº¿ç¨‹å‘½å</font></h3><p>åœ¨linuxå†…æ ¸æºç çš„ include&#x2F;uapi&#x2F;linux&#x2F;prctl.h æ–‡ä»¶ä¸­ï¼Œå®šä¹‰çš„é€‰é¡¹æœ‰è¿™ä¹ˆä¸€ä¸ªï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> PR_SET_NAME    15		<span class="comment">/* Set process name */</span></span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æŸ¥é˜…æ–‡æ¡£å¯ä»¥çŸ¥é“è¿™ä¸ªå‚æ•°å¯ä»¥ç”¨äºè®¾å®šçº¿ç¨‹çš„åç§°ï¼š</p>
<blockquote>
<p>PR_SET_NAME (since Linux 2.6.9)<br>           Set the name of the calling thread, using the value in the location pointed to by (char *) arg2.  The name can be up to 16 bytes  long,  including  the  terminating  null byte.  (If the length of the string, including the terminating null byte, exceeds 16 bytes, the string is silently truncated.)  This is the same attribute that can be set via pthread_setname_np(3) and retrieved using pthread_getname_np(3).  The attribute is likewise accessible via &#x2F;proc&#x2F;self&#x2F;task&#x2F;[tid]&#x2F;comm, where tid is the  name  of  the calling thread.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å¤§æ¦‚çš„æ„æ€å°±æ˜¯ï¼Œä½¿ç”¨(char *) arg2æŒ‡å‘çš„ä½ç½®ä¸­çš„å€¼å¯ä»¥è®¾ç½®è°ƒç”¨çº¿ç¨‹çš„åç§°ã€‚è¯¥åç§°æœ€å¤šå¯ä»¥æœ‰16ä¸ªå­—èŠ‚é•¿ï¼ŒåŒ…æ‹¬ç»ˆæ­¢ç©ºå­—èŠ‚ã€‚(å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŒ…æ‹¬ç»“æŸç©ºå­—èŠ‚ï¼Œè¶…è¿‡16å­—èŠ‚ï¼Œå­—ç¬¦ä¸²å°†è¢«æˆªæ–­ã€‚)è¿™ä¸ªå±æ€§å¯ä»¥é€šè¿‡pthread_setname_np(3)è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pthread_getname_np(3)æ£€ç´¢ã€‚è¯¥å±æ€§åŒæ ·å¯ä»¥é€šè¿‡&#x2F;proc&#x2F;self&#x2F;task&#x2F;[tid]&#x2F;commè®¿é—®ï¼Œå…¶ä¸­tidæ˜¯è°ƒç”¨çº¿ç¨‹çš„åç§°ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä¾‹å­å¦‚ä¸‹ï¼š</p>
<details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  <span class="comment">/* fopen fputc */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span><span class="comment">/* pthread_create pthread_exit */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span> <span class="comment">/* sleep */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/prctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread1</span><span class="params">(<span class="type">void</span> *arg)</span>;</span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread2</span><span class="params">(<span class="type">void</span> *arg)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> ret;</span><br><span class="line">	<span class="type">pthread_t</span> tid1, tid2;</span><br><span class="line">	ret = pthread_create(&amp;tid1, <span class="literal">NULL</span>, thread1, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;This is threadMutex1 thread create,ret=%d,tid1=%lu\n&quot;</span>, ret, tid1);</span><br><span class="line">	ret = pthread_create(&amp;tid2, <span class="literal">NULL</span>, thread2, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;This is threadMutex2 thread create,ret=%d,tid2=%lu\n&quot;</span>, ret, tid2);</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread1</span><span class="params">(<span class="type">void</span> *arg)</span></span><br><span class="line">&#123;</span><br><span class="line">	pthread_detach(pthread_self());</span><br><span class="line">	<span class="type">char</span> * thread1_name  = <span class="string">&quot;thread1&quot;</span>;</span><br><span class="line">	prctl(PR_SET_NAME, (<span class="type">unsigned</span> <span class="type">long</span>)thread1_name);</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);<span class="comment">/* usçº§ä¼‘çœ  */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="string">&quot;thread1 exit!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">thread2</span><span class="params">(<span class="type">void</span> *arg)</span></span><br><span class="line">&#123;</span><br><span class="line">	pthread_detach(pthread_self());</span><br><span class="line">	<span class="type">char</span> * thread2_name  = <span class="string">&quot;thread2&quot;</span>;</span><br><span class="line">	prctl(PR_SET_NAME, (<span class="type">unsigned</span> <span class="type">long</span>)thread2_name);</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);<span class="comment">/* usçº§ä¼‘çœ  */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="string">&quot;thread2 exit!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>

<p>åƒä¸Šè¾¹ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·ç¼–è¯‘å—ï¼Œå¹¶åœ¨åå°è¿è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc main.c -Wall -lpthread</span><br><span class="line">./a.out &amp;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹ç°åœ¨çš„æƒ…å†µï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hk@vm:~/6temp/test$ ps</span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line"> 57544 pts/23   00:00:00 bash</span><br><span class="line"> 58948 pts/23   00:00:00 main_process</span><br><span class="line"> 58970 pts/23   00:00:00 ps</span><br><span class="line">hk@vm:~$ ps -T</span><br><span class="line">   PID   SPID TTY          TIME CMD</span><br><span class="line">  2401   2401 pts/19   00:00:00 bash</span><br><span class="line">  8950   8950 pts/19   00:00:00 gedit</span><br><span class="line">  8950   8951 pts/19   00:00:00 gmain</span><br><span class="line">  8950   8952 pts/19   00:00:00 gdbus</span><br><span class="line">  8950   8953 pts/19   00:00:00 dconf worker</span><br><span class="line">  9001   9001 pts/19   00:00:00 a.out</span><br><span class="line">  9001   9002 pts/19   00:00:00 thread1</span><br><span class="line">  9001   9003 pts/19   00:00:00 thread2</span><br><span class="line">  9004   9004 pts/19   00:00:00 ps</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬çš„è¿›ç¨‹ä¸ºa.outï¼Œä¸‹è¾¹æœ‰ä¸¤ä¸ªåä¸ºthread1å’Œthread2çš„ä¸œè¥¿ï¼Œå®ƒä»¬å‰è¾¹çš„PIDä¸è¿›ç¨‹a.outæ˜¯ä¸€è‡´çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ä¸¤ä¸ªçº¿ç¨‹ã€‚</p>
<h2 id="2-è®¾ç½®è¿›ç¨‹åå­—ï¼Ÿ"><a href="#2-è®¾ç½®è¿›ç¨‹åå­—ï¼Ÿ" class="headerlink" title="2. è®¾ç½®è¿›ç¨‹åå­—ï¼Ÿ"></a><font size=3>2. è®¾ç½®è¿›ç¨‹åå­—ï¼Ÿ</font></h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  <span class="comment">/* fopen fputc */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span> <span class="comment">/* sleep */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/prctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> ret;</span><br><span class="line">    </span><br><span class="line">	<span class="type">char</span> * main_name  = <span class="string">&quot;main_process&quot;</span>;</span><br><span class="line">	prctl(PR_SET_NAME, (<span class="type">unsigned</span> <span class="type">long</span>)main_name);</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sleep(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>

<p>åƒä¸Šè¾¹ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·ç¼–è¯‘å—ï¼Œå¹¶åœ¨åå°è¿è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc main.c -Wall -lpthread</span><br><span class="line">./a.out &amp;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹ç°åœ¨çš„æƒ…å†µï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hk@vm:~$ ps -T</span><br><span class="line">   PID   SPID TTY          TIME CMD</span><br><span class="line">  9077   9077 pts/1    00:00:00 bash</span><br><span class="line">  9106   9106 pts/1    00:00:00 main_process</span><br><span class="line">  9107   9107 pts/1    00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„è¿›ç¨‹åå­—ä¸å†æ˜¯a.outäº†ï¼Œå˜æˆäº†æˆ‘ä»¬è®¾ç½®çš„å€¼ã€‚</p>

    </div>

    
    
    

    <footer class="post-footer">




    <div>
        
            <div style="text-align:center;color: #ccc;font-size:14px;">
            ----------æœ¬æ–‡ç»“æŸ
            <i class="fas fa-fan fa-spin" style="color: #FF1493; font-size: 1rem"></i>
            æ„Ÿè°¢æ‚¨çš„é˜…è¯»----------
            </div>
        
    </div>





  
  <div class="my_post_copyright"> 
    <p><span>æ–‡ç« æ ‡é¢˜:</span><a href="/post/554e6f64.html">LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•°</a></p>
    <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="æ¬¢è¿è®¿é—® ã€Šè‹æœ¨ã€‹ çš„å­¦ä¹ ç¬”è®°">è‹æœ¨</a></p>
    <p><span>å‘å¸ƒæ—¶é—´:</span>2023å¹´07æœˆ02æ—¥ - 21:52</p>
    <p><span>æœ€åæ›´æ–°:</span>2025å¹´06æœˆ14æ—¥ - 00:25</p>
    <p><span>åŸå§‹é“¾æ¥:</span><a href="/post/554e6f64.html" title="LV05-07-Linuxç³»ç»Ÿ-04-prctlå‡½æ•°">https://sumumm.github.io/post/554e6f64.html</a></p>
    <p><span>è®¸å¯åè®®:</span><i class="fab fa-creative-commons"></i> <a rel="license" href= "https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚</p>  
  </div>
  


          <div class="post-tags">
              <a href="/tags/LV05-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="fa fa-tag"></i> LV05-æ“ä½œç³»ç»Ÿ</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/84248a27.html" rel="prev" title="LV07-01-SQLite-åŸºç¡€çŸ¥è¯†">
                  <i class="fa fa-angle-left"></i> LV07-01-SQLite-åŸºç¡€çŸ¥è¯†
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/eef03213.html" rel="next" title="LV05-07-Linuxç³»ç»Ÿ-03-éšæœºæ•°">
                  LV05-07-Linuxç³»ç»Ÿ-03-éšæœºæ•° <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2017 â€“ 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">è‹æœ¨</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">3.7m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">225:26</span>
  </span>
</div>




    <span id="sitetime"></span>
    <script defer language=javascript>
        function siteTime()
        {
            window.setTimeout("siteTime()", 1000);
            var seconds = 1000;
            var minutes = seconds * 60;
            var hours = minutes * 60;
            var days = hours * 24;
            var years = days * 365;
            var today = new Date();
            var todayYear = today.getFullYear();
            var todayMonth = today.getMonth()+1;
            var todayDate = today.getDate();
            var todayHour = today.getHours();
            var todayMinute = today.getMinutes();
            var todaySecond = today.getSeconds();
            /*==================================================
            Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³)
            year        - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼
            month       - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½
            day         - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•°
            hours       - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•°
            minutes     - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•°
            seconds     - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•°
            microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•°
            ==================================================*/
            var t1 = Date.UTC(2017, 
                              5, 
                              19, 
                              0, 
                              0, 
                              0); //åŒ—äº¬æ—¶é—´
            var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
            var diff = t2-t1;
            var diffYears = Math.floor(diff/years);
            var diffDays = Math.floor((diff/days)-diffYears*365);
            var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
            var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
            var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
            document.getElementById("sitetime").innerHTML="å·²åœ¨è¿™é‡Œ "+diffYears+" å¹´ "+diffDays+" å¤© "+diffHours+" å°æ—¶ "+diffMinutes+" åˆ†é’Ÿ "+diffSeconds+" ç§’";
        }
        siteTime();
    </script>



    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


 
        <div id="click-show-text"
            data-mobile = false
            data-text = å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•åˆ¶,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„
            data-fontsize = 15px
            data-random= false>
        </div>
       

      
        <script async src=https://cdn.jsdelivr.net/npm/hexo-next-mouse-effect@latest/click/showText.js></script>
      

      
    




    <script async src="/js/fancybox_param.js"></script>





<!-- APlayeræœ¬ä½“ -->



</body>
</html>
